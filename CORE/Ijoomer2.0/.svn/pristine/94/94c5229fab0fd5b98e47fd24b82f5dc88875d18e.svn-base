package com.ijoomer.components.jomsocial;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.widget.ImageView;

import com.androidquery.AQuery;
import com.ijoomer.custom.interfaces.CustomClickListner;
import com.ijoomer.src.R;
import com.smart.framework.SmartActivity;

public class JomPhotoDetailFragment extends Fragment {

	private ImageView imgPhotoDetail;
	private View v;

	private GestureDetector gestureDetector;
	private CustomClickListner local;

	private AQuery androidQuery;

	private String photoUrl;

	/**
	 * Overrides method 
	 */
	
	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
		v = inflater.inflate(R.layout.jom_photo_detail_image_item, null);
		initComponents(photoUrl);
		return v;
	}

	public void initComponents(String url) {
		gestureDetector = new GestureDetector(new SingleTapConfirm());
		imgPhotoDetail = (ImageView) v.findViewById(R.id.imgPhotoDetail);
		photoUrl = url;
		
		androidQuery.id(imgPhotoDetail).image(photoUrl, true, true,((SmartActivity)getActivity()).getDeviceWidth(),0);
		
		imgPhotoDetail.setOnTouchListener(new OnTouchListener() {

			@Override
			public boolean onTouch(View v, MotionEvent event) {
				gestureDetector.onTouchEvent(event);
				return true;
			}
		});
	}

	/**
	 * Class method 
	 */
	
	public JomPhotoDetailFragment(String url, CustomClickListner target) {
		androidQuery = new AQuery(getActivity());
		photoUrl = url;
		local = target;
	}

	private class SingleTapConfirm extends SimpleOnGestureListener {

		@Override
		public boolean onSingleTapConfirmed(MotionEvent e) {
			local.onClick("");
			return true;
		}
	}
}
